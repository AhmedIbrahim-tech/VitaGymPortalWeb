@using Core.ViewModels.BookingViewModels
@model IEnumerable<MemberForSessionViewModel>

@{
	ViewData["Title"] = "Booking Details";
}

<partial name="_AlertMessages" />

<div class="d-flex flex-wrap justify-content-between align-items-center mb-4">
	<div>
		<h2 class="fw-bold text-primary mb-2 d-flex align-items-center gap-2">
			<i class="bi bi-people fs-1"></i>
			<span>Session Members</span>
		</h2>
		<p class="text-muted mb-0">Members that have booked this session</p>
	</div>
	<div>
		<a asp-action="Create" asp-route-id="@ViewContext.RouteData.Values["id"]"
		   class="btn btn-primary d-flex align-items-center gap-2">
			<i class="bi bi-plus-lg"></i> New Booking
		</a>
	</div>
</div>
<div class="card shadow-sm">

	<div class="card-body">

		@if (Model != null && Model.Any())
		{
			<table class="table table-striped table-hover align-middle text-center">
				<thead>
					<tr>
						<th>Member</th>
						<th>Booking Date</th>
						<th>Actions</th>
					</tr>
				</thead>
				<tbody>
					@foreach (var item in Model)
					{
						<tr>
							<td>@item.MemberName</td>
							<td>@item.BookingDate</td>
							<td>
								<div class="d-flex justify-content-center gap-1">
									<form method="post" asp-action="Cancel" class="m-0">
										<input type="hidden" name="MemberId" value="@item.MemberId" readonly />
										<input type="hidden" name="SessionId" value="@item.SessionId" readonly />
										<button type="submit" class="btn btn-sm btn-danger"
												onclick="return confirm('Are you sure you want to cancel this booking?');">
											<i class="fas fa-times"></i> Cancel
										</button>
									</form>
								</div>
							</td>
						</tr>
					}
				</tbody>
			</table>
		}
		else
		{
			ViewData["EmptyIcon"] = "calendar-x";
			ViewData["EmptyTitle"] = "No Bookings Available";
			ViewData["EmptyMessage"] = "Add your first booking to get started";
			<partial name="_EmptyState" model="@((string)null)" />
		}
	</div>
</div>
<div class="mt-3">
	<a asp-controller="Booking" asp-action="Index" class="btn btn-outline-secondary d-flex align-items-center gap-2">
		<i class="bi bi-arrow-left"></i> Back to List
	</a>
</div>

@section Scripts {
	<partial name="_AlertBoxScript" />
}