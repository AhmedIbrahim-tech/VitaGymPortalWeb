@using Core.Modules.Sessions.ViewModels
@model IEnumerable<SessionViewModel>

<partial name="_AlertMessages" />

<partial name="_PageHeader" model="@((string)null)" />

@if (Model != null && Model.Any())
{
	<div class="card">
		<div class="card-body p-0">
			<div class="table-responsive">
				<table class="table datatable">
					<thead class="thead-light">
						<tr>
							<th class="no-sort">
								<label class="checkboxs">
									<input type="checkbox" id="select-all">
									<span class="checkmarks"></span>
								</label>
							</th>
							<th>Category</th>
							<th>Trainer</th>
							<th class="d-none d-md-table-cell">Description</th>
							<th>Date</th>
							<th class="d-none d-lg-table-cell">Time</th>
							<th class="d-none d-lg-table-cell">Duration</th>
							<th>Capacity</th>
							<th>Status</th>
							<th class="no-sort"></th>
						</tr>
					</thead>
					<tbody>
						@foreach (var session in Model)
						{
							<tr>
								<td>
									<label class="checkboxs">
										<input type="checkbox">
										<span class="checkmarks"></span>
									</label>
								</td>
								<td>@session.CategoryName</td>
								<td>@session.TrainerName</td>
								<td class="d-none d-md-table-cell">@(session.Description?.Length > 50 ? session.Description.Substring(0, 50) + "..." : session.Description)</td>
								<td>@session.DateDisplay</td>
								<td class="d-none d-lg-table-cell">@session.TimeRangeDisplay</td>
								<td class="d-none d-lg-table-cell">@session.DurationDisplay</td>
								<td>@session.CapacityDisplay</td>
								<td>
									@if (session.Status == "Ongoing")
									{
										<span class="d-inline-flex align-items-center p-1 pe-2 rounded-1 text-white bg-success fs-10">
											<i class="ti ti-point-filled me-1 fs-11"></i>@session.Status
										</span>
									}
									else if (session.Status == "Upcoming")
									{
										<span class="d-inline-flex align-items-center p-1 pe-2 rounded-1 text-white bg-primary fs-10">
											<i class="ti ti-point-filled me-1 fs-11"></i>@session.Status
										</span>
									}
									else
									{
										<span class="d-inline-flex align-items-center p-1 pe-2 rounded-1 text-white bg-secondary fs-10">
											<i class="ti ti-point-filled me-1 fs-11"></i>@session.Status
										</span>
									}
								</td>
								<td class="action-table-data">
									<div class="edit-delete-action">
										@if (session.Status == "Upcoming")
										{
											<a asp-controller="Booking" asp-action="GetMembersForUpcomingSession" asp-route-id="@session.Id" class="btn btn-icon btn-soft-info rounded-pill" title="View Members">
												<i data-feather="eye" class="feather-edit"></i>
											</a>
										}
										else if (session.Status == "Ongoing")
										{
											<a asp-controller="Booking" asp-action="GetMembersForOngoingSessions" asp-route-id="@session.Id" class="btn btn-icon btn-soft-info rounded-pill" title="View Members">
												<i data-feather="eye" class="feather-edit"></i>
											</a>
										}
									</div>
								</td>
							</tr>
						}
					</tbody>
				</table>
			</div>
		</div>
	</div>
}
else
{
	<partial name="_EmptyState" />
}

@section Scripts {
	<partial name="_AlertBoxScript" />
	<script>
		$(document).ready(function () {
			if (feather) {
				feather.replace();
			}
		});
	</script>
}
